(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(72)},49:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return m});var n=a(2),s=a(3),r=a(5),i=a(4),l=a(6),c=a(0),o=a.n(c),u=a(73),m=(a(58),function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",{className:"text-center"},"Out Of Date Tracker"),o.a.createElement("p",null,"Easily keep track of out of date dairy or other product. Add, edit or remove product as necessary. :)"),o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement(u.a,{className:"btn btn-success",to:"/signup"},"Sign Up"),o.a.createElement(u.a,{className:"btn btn-primary",to:"/signin"},"Sign In")))}}]),t}(c.Component))},58:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var n=a(2),s=a(3),r=a(5),i=a(4),l=a(6),c=a(0),o=a.n(c),u=a(73),m=a(8),p=a.n(m),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={data:{username:"",password:"",password2:""},res:null},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.state.data;t[e.target.name]=e.target.value,this.setState({data:t})}},{key:"statusToJSX",value:function(){return this.state.res?o.a.createElement("div",{className:this.state.res.class},this.state.res.message):""}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.data;return a.password!==a.password2?this.setState({class:"alert alert-danger",message:"Your passwords do not match. Please try again."}):a.password.length<8?this.setState({class:"alert alert-danger",message:"Passwords must be at least 8 characters long"}):(this.setState({class:"",message:""}),void p.a.post("/api/adduser",{username:a.username,password:a.password}).then(function(e){e.data.message=o.a.createElement(o.a.Fragment,null,"Your account was created. ",o.a.createElement(u.a,{to:"/signin"},"Sign In")," to view your dashboard."),t.setState({res:e.data}),t.props.setGlobal({user:e.data.username})}).catch(function(e){t.setState({res:e.response.data})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Sign Up"),o.a.createElement("br",null),this.statusToJSX(),o.a.createElement("form",{onSubmit:this.handleSubmit.bind(this),method:"POST"},o.a.createElement("label",null,"Username"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"@")),o.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter Username",name:"username",value:this.state.data?this.state.data.username:"",onChange:this.handleChange.bind(this)})),o.a.createElement("label",null,"Password"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{className:"form-control",type:"password",placeholder:"Enter Password",name:"password",value:this.state.data?this.state.data.password:"",onChange:this.handleChange.bind(this)})),o.a.createElement("label",null,"Confirm Password"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{className:"form-control",type:"password",placeholder:"Enter Password",name:"password2",value:this.state.data?this.state.data.password2:"",onChange:this.handleChange.bind(this)})),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"submit",className:"btn btn-success"}))),o.a.createElement("p",null,"Already have an account? ",o.a.createElement(u.a,{to:"/signin"},"Sign In here"),"."))}}]),t}(c.Component)},61:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var n=a(2),s=a(3),r=a(5),i=a(4),l=a(6),c=a(0),o=a.n(c),u=a(73),m=(a(62),a(8)),p=a.n(m),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={data:{},res:null},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this.state.data;t[e.target.name]=e.target.value,this.setState({data:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),p.a.post("/api/signin",this.state.data).then(function(e){t.props.setGlobal({user:e.data},function(){t.props.history.push("/dashboard")})}).catch(function(e){t.setState({res:e.response})})}},{key:"resToJSX",value:function(){return this.state.res?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.res.statusText):""}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Sign In"),o.a.createElement("br",null),this.resToJSX(),o.a.createElement("form",{onSubmit:this.handleSubmit.bind(this),method:"POST"},o.a.createElement("label",null,"Username"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},"@")),o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",value:this.state.data.username,onChange:this.handleChange.bind(this)})),o.a.createElement("label",null,"Password"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:this.state.data.password,onChange:this.handleChange.bind(this)})),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"submit",className:"btn btn-primary"}))),o.a.createElement("p",null,"Don't have an account? ",o.a.createElement(u.a,{to:"/signup"},"Signup here"),"."))}}]),t}(c.Component)},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return p});var n=a(2),s=a(3),r=a(5),i=a(4),l=a(6),c=a(0),o=a.n(c),u=a(8),m=a.n(u),p=(a(65),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={items:[],newItems:[]},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"set",value:function(e){this.setState(e)}},{key:"search",value:function(e,t){var a=this,n="";n+=e?"?query="+e:"",n+=t?n.length>0?"&skip="+t:"?skip="+t:"",m.a.get("/api/items"+n).then(function(e){a.props.history.push("/dashboard"+n),a.setState({items:e.data})}).catch(function(){})}},{key:"componentWillMount",value:function(){var e=this,t=this.props.location.search;m.a.get("/api/items"+t).then(function(t){e.setState({items:t.data})}).catch(function(e){alert("("+e.response+")Error Loading items...")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"breadcrumb"},o.a.createElement("i",null,this.props.globals.user?this.props.globals.user.username+"'s Dashboard":"")),o.a.createElement(d,{newItems:this.state.newItems,set:this.set.bind(this),search:this.search.bind(this)}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement(h,{set:this.set.bind(this),items:this.state.newItems}),this.state.items?this.state.items.map(function(t,a){return o.a.createElement(b,{data:t,key:"item-"+a,id:"item"+a+t._id,index:a,items:e.state.items,set:e.set.bind(e)})}):"")),o.a.createElement(g,{search:this.props.location.search,searchBy:this.search.bind(this),items:this.state.items}))}}]),t}(c.Component)),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={query:""},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"addItem",value:function(e){e.preventDefault();var t=this.props.newItems;t.push({name:"New Item",dates:[""],class:"border-primary"}),this.props.set({newItems:t})}},{key:"handleChange",value:function(e){this.setState({query:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.search(this.state.query,0)}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col-sm-12",method:"POST",onSubmit:this.handleSubmit.bind(this)},o.a.createElement("div",{className:"input-group"},o.a.createElement("label",null,"Search for an item"),o.a.createElement("div",{className:"input-group mb-3"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Search",value:this.state.query,onChange:this.handleChange.bind(this)}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-outline-primary",type:"submit",id:"button-addon2"},"Search")))),o.a.createElement("button",{className:"btn btn-outline-primary btn-sm float-right add-item-btn",onClick:this.addItem.bind(this)},"Add Item")))}}]),t}(c.Component),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={alert:{className:"",msg:""}},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"saveAll",value:function(e){var t=this,a=this.props.items;a=a.map(function(e){for(var t=e.dates.length;t--;t>-1)e.dates[t].length&&e.dates[t].length>0?e.dates[t]=new Date(e.dates[t]).getTime():e.dates.splice(t,1);return e}),m.a.post("/api/items",{items:this.props.items}).then(function(e){t.setState({alert:{className:"alert alert-success",msg:"Items saved!"}},t.removeMessage)}).catch(function(e){var a={className:"alert alert-danger",msg:e.response.statusText};t.setState({alert:a},t.removeMessage)})}},{key:"removeMessage",value:function(){var e=this;window.setTimeout(function(){e.setState({alert:{className:"",msg:""}})},4e3)}},{key:"render",value:function(){var e=this;return this.props.items&&this.props.items.length?o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:this.state.alert.className+" my-alert"},this.state.alert.msg),this.props.items.map(function(t,a){return o.a.createElement(b,{key:"newitem-"+a,data:t,id:"item"+a+t._id,index:a,items:e.props.items,set:e.props.set.bind(e),newItem:!0})}),o.a.createElement("button",{className:"btn btn-outline-primary btn-sm float-right save-all-btn",onClick:this.saveAll.bind(this)},"Save All"))):""}}]),t}(c.Component),b=function(e){function t(e){var a;Object(n.a)(this,t);var s=(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).props.items,l=a.props.data;return l.open=!1,s[a.props.index]=l,a.props.set({items:s}),a.state={outline:""},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"toggleOpen",value:function(){var e=this.props.items,t=this.props.data;t.open=!t.open,e[this.props.index]=t,this.props.set({items:e})}},{key:"getFirstToSpoil",value:function(){if(!this.props.data.dates)return"Needs Date";for(var e=this.props.data.dates,t=0,a=0;a<e.length;a++)e[a]>t&&(t=e[a]);return 0!==t?new Date(t).toISOString().substring(0,10):"Needs Date"}},{key:"setOutline",value:function(e){if("Needs Date"!==e){var t=new Date;(e=new Date(e)).getTime()<=t.getTime()?this.setState({outline:" border-danger"}):e.getTime()-t.getTime()<=432e6?this.setState({outline:" border-warning"}):this.setState({outline:""})}else this.setState({outline:" border-secondary"})}},{key:"componentWillMount",value:function(){this.setOutline(this.getFirstToSpoil())}},{key:"render",value:function(){var e=this.props.data||{name:"Undefined"};return o.a.createElement("div",{className:e.class?"card "+e.class+this.state.outline:"card"+this.state.outline},o.a.createElement("a",{className:"card-header",href:"#"+this.props.id,role:"button",onClick:this.toggleOpen.bind(this)},e.name||"No Name",o.a.createElement("i",{className:"text-bold float-right"},"OOD ",this.getFirstToSpoil())),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:this.props.data.open?"card-content item":"card-content item close-item"},o.a.createElement(v,{data:this.props.data,index:this.props.index,items:this.props.items,set:this.props.set.bind(this),newItem:this.props.newItem})))))}}]),t}(c.Component),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={alert:{className:"",msg:""}},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"addDate",value:function(e){e.preventDefault();var t=this.props.data.dates;t.push(""),this.setItem("dates",t)}},{key:"setItem",value:function(e,t){var a=this.props.items;a[this.props.index][e]=t,this.props.newItem?this.props.set({newItems:a}):this.props.set({items:a})}},{key:"removeDate",value:function(e,t){e.preventDefault();var a=this.props.data.dates;a.splice(t,1),this.setItem("dates",a)}},{key:"submitItem",value:function(e){var t=this;e.preventDefault();for(var a=this.props.data,n=a.dates.length;n--;n>-1)a.dates[n].length&&a.dates[n].length>0?a.dates[n]=new Date(a.dates[n]).getTime():a.dates.splice(n,1);m.a.put("/api/item",a).then(function(e){t.setState({alert:{className:"alert alert-success",msg:"Item saved"}},t.removeMessage),t.setItem("_id",e.data._id)}).catch(function(e){var a={className:"alert alert-danger",msg:e.response.statusText};t.setState({alert:a})})}},{key:"deleteItem",value:function(e){var t=this;if(e.preventDefault(),!this.props.data._id){var a=this.props.items;return a.splice(this.props.index,1),void(this.props.newItem?this.props.set({newItems:a}):this.props.set({items:a}))}m.a.delete("/api/item",{data:{item_id:this.props.data._id}}).then(function(){var e=t.props.items;e.splice(t.props.index,1),t.props.set({items:e})}).catch(function(e){var a={className:"alert alert-danger",msg:e.response.statusText};t.setState({alert:a},t.removeMessage)})}},{key:"removeMessage",value:function(){var e=this;window.setTimeout(function(){e.setState({alert:{className:"",msg:""}})},4e3)}},{key:"handleNameChange",value:function(e){e.preventDefault(),this.setItem("name",e.target.value)}},{key:"handleDateChange",value:function(e,t){e.preventDefault();var a=this.props.data.dates;a[t]=e.target.value,this.setItem("dates",a)}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:this.state.alert.className+" my-alert"},this.state.alert.msg),o.a.createElement("form",{method:"POST",onSubmit:this.submitItem.bind(this)},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Item Name"),o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Name",value:"New Item"!==this.props.data.name?this.props.data.name:"",onChange:this.handleNameChange.bind(this)})),o.a.createElement("div",{className:"form-group expire-dates-list"},o.a.createElement("label",null,"Expire Dates"),this.props.data.dates?this.props.data.dates.map(function(t,a){return o.a.createElement("div",{className:"input-group mb-3",key:"date-"+a},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("button",{className:"btn btn-danger",onClick:function(t){return e.removeDate(t,a)}},"Delete")),o.a.createElement("input",{type:"date",className:"form-control",placeholder:"Enter Date",value:""!==t?new Date(t).toISOString().substring(0,10):"",onChange:function(t){return e.handleDateChange(t,a)}}))}):"",o.a.createElement("button",{className:"btn btn-outline-primary btn-sm float-right",onClick:this.addDate.bind(this)},"Add Date")),o.a.createElement("button",{type:"submit",className:"btn btn-success float-right save-btn"},"Save Changes"),o.a.createElement("button",{onClick:this.deleteItem.bind(this),className:"btn btn-danger float-left"},"Delete Item")))}}]),t}(c.Component),g=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"getQuery",value:function(){var e=this.props.search;return-1!==e.indexOf("query")?e.substring(e.indexOf("=")+1,-1!==e.indexOf("&")?e.indexOf("&"):e.length):null}},{key:"getSkip",value:function(){var e=this.props.search;if(-1!==e.indexOf("skip")){var t=e.substring(e.indexOf("skip=")+5,e.length);return parseInt(t)}return 0}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"row justify-content-center pagination"},o.a.createElement("nav",{className:"text-center"},o.a.createElement("ul",{className:"pagination"},this.getSkip()>0?o.a.createElement("li",{className:"page-item"},o.a.createElement("span",{className:"page-link",onClick:function(){return e.props.searchBy(e.getQuery(),e.getSkip()-1)}},"Previous")):"",10===this.props.items.length?o.a.createElement("li",{className:"page-item"},o.a.createElement("span",{className:"page-link",onClick:function(){return e.props.searchBy(e.getQuery(),e.getSkip()+1)}},"Next")):"")))}}]),t}(c.Component)},65:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(24),i=a.n(r),l=a(2),c=a(3),o=a(5),u=a(4),m=a(6),p=a(76),d=a(75),h=a(74),b=a(8),v=a.n(b),g=(a(49),a(51),a(73)),f=(a(53),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"signOut",value:function(){var e=this;v.a.get("/api/signout").then(function(){e.props.setGlobal({user:{}})}).catch(function(){alert("Sign Out failed")})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},s.a.createElement(g.a,{className:"navbar-brand",to:"/"},"OOD Tracker"),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},s.a.createElement("div",{className:"navbar-nav"},s.a.createElement(g.a,{className:"nav-item nav-link",to:"/dashboard"},"Dashboard"),s.a.createElement(g.a,{className:"nav-item nav-link",to:"/signup"},"Sign Up"),this.props.globals&&this.props.globals.user._id?s.a.createElement(g.a,{className:"nav-item nav-link",to:"#",onClick:this.signOut.bind(this)},"Sign Out"):s.a.createElement(g.a,{className:"nav-item nav-link",to:"/signin"},"Sign In"))))}}]),t}(n.Component)),E=[{path:"/",component:a(57).default,exact:!0},{path:"/signup",component:a(60).default,exact:!0},{path:"/signin",component:a(61).default,exact:!0},{path:"/dashboard",component:a(64).default,auth:!0}],y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={user:{},ready:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;v.a.get("/api/myuser").then(function(t){e.setState({user:t.data,ready:!0})}).catch(function(){e.setState({ready:!0})})}},{key:"setGlobal",value:function(e,t){this.setState(e,t)}},{key:"getRoutes",value:function(){var e=this;return E.map(function(t){var a=t.path,n=t.component,r=t.exact,i=t.auth?function(t){return e.state.user._id?s.a.createElement(O,null,s.a.createElement(n,Object.assign({},t,{setGlobal:e.setGlobal.bind(e),globals:e.state}))):s.a.createElement(p.a,{to:"/signin"})}:function(t){return s.a.createElement(O,null,s.a.createElement(n,Object.assign({},t,{setGlobal:e.setGlobal.bind(e),globals:e.state})))};return r?s.a.createElement(d.a,{key:a,path:a,render:i,exact:!0}):s.a.createElement(d.a,{key:a,path:a,render:i})})}},{key:"render",value:function(){return this.state.ready?s.a.createElement(h.a,null,s.a.createElement(N,null,s.a.createElement(f,{setGlobal:this.setGlobal.bind(this),globals:this.state}),this.getRoutes())):"Loading..."}}]),t}(n.Component),N=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container-fluid main-content"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},this.props.children)))}}]),t}(n.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"row justify-content-center",id:"login-page"},s.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-4"},this.props.children))}}]),t}(n.Component),k=y;a(68),a(70),a(23),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.ed5ec443.chunk.js.map